import os
import shutil

def generate_preprocessed_articles():
    """
    將預先處理好的文章段落寫入檔案。
    內容來源: https://www.cathay-ins.com.tw/cathayins/personal/knowledge-blog/category-02/t62/
    """
    BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
    OUTPUT_DIR = os.path.join(BASE_DIR, "data", "raw_html")

    # 手動切分好的文章內容
    article_chunks = {
        "article_chunk_01.txt": """強制險、第三人責任險差在哪？一張表秒懂！理賠範圍、保費、常見問題...
機車是台灣人最普遍的代步工具，但你知道騎車上路，除了強制險，還應該要保第三人責任險嗎？這兩種保險差在哪？理賠範圍又各是哪些？本篇帶你一次看懂！""",
        "article_chunk_02.txt": """強制險 vs. 第三人責任險，保障對象、理賠範圍哪裡不同？
強制險的全名是「強制汽車責任保險」，是政府為了保障交通事故中受害者的基本權益，規定車主都必須投保的保險。無論肇事責任在誰身上，受害人都可以申請理賠。
第三人責任險則是基於強制險的升級版，主要保障當車主（被保險人）因為駕車過失，造成第三人（對方駕駛、乘客或路人）傷亡或財物損失時，依法應負的賠償責任。
簡單來說，強制險只理賠「人身傷害」，且對象涵蓋我方乘客與對方駕駛、乘客、路人，但不包含我方駕駛。第三人責任險則同時理賠「人身傷害」與「財物損失」，且理賠對象僅限於「第三人」，也就是對方駕駛、乘客與路人。""",
        "article_chunk_03.txt": """強制險 vs. 第三人責任險比較表
為了讓你更清楚兩者的差異，我們整理了以下比較表：
險種: 強制險
法律強制性: 必須投保
保障對象: 我方乘客、對方駕駛、乘客、路人 (不含我方駕駛)
理賠範圍: 體傷: 每人最高20萬元 / 失能: 每人最高200萬元 / 死亡: 每人定額200萬元
財損理賠: 無
保費: 固定，依車種、年齡、肇事紀錄等調整

險種: 第三人責任險
法律強制性: 非強制，建議加保
保障對象: 對方駕駛、乘客、路人 (第三人)
理賠範圍: 體傷: 依保額理賠 (可自訂) / 死亡: 依保額理賠 (可自訂)
財損理賠: 有，依保額理賠 (可自訂)
保費: 依保額、車種、年齡、性別、肇事紀錄等因素而定""",
        "article_chunk_04.txt": """常見問題
Q1：只有強制險夠嗎？為什麼需要加保第三人責任險？
A：強制險的保障範圍僅限於「人身傷害」，且理賠額度是固定的。若不幸發生車禍，造成對方車輛毀損，或是需要支付高額的醫藥費、精神賠償等，強制險是完全不理賠的。此時，第三人責任險就能派上用場，彌補強制險的不足。
Q2：第三人責任險的保額要買多少才夠？
A：建議「體傷/死亡」保額至少300萬元，「財損」保額至少50萬元。現今路上名車多，若不慎發生碰撞，維修費動輒數十萬甚至上百萬，因此提高財損保額非常重要。你可以根據自身駕駛習慣、行車路線與經濟能力來做調整。
Q3：我開車很小心，應該可以不用保第三人責任險吧？
A：即使你再小心，也無法保證不會遇到突發狀況或「馬路三寶」。保險的意義在於「風險轉移」，用小小的保費，轉嫁可能無法承擔的巨大風險。一年幾千元的保費，就能換來上百萬的保障，絕對是划算的投資。"""
    }

    # 清理並重建輸出資料夾
    if os.path.exists(OUTPUT_DIR):
        shutil.rmtree(OUTPUT_DIR)
    os.makedirs(OUTPUT_DIR)
    print(f"已清理並重建資料夾: {OUTPUT_DIR}")

    # 將切分好的內容存檔
    for filename, content in article_chunks.items():
        file_path = os.path.join(OUTPUT_DIR, filename)
        with open(file_path, 'w', encoding='utf-8') as f:
            f.write(content)
        print(f"已儲存檔案: {file_path}")

    print(f"\n成功產生 {len(article_chunks)} 個文章檔案，並儲存於 {OUTPUT_DIR}")

if __name__ == "__main__":
    generate_preprocessed_articles()