📝 RAG LLM 機車保險知識型助手：開發日誌此日誌記錄了專案從零開始建置，歷經爬蟲失敗、本地 LLM 選型、套件版本衝突解決，以及最終部署準備的完整過程。📅 2025.11.28 - 專案啟動與核心功能開發狀態主題詳情來源新增專案結構與環境初始化確定專案資料夾結構：rag_insurance/ (後續改為 HW4/)，包含 data/ (文章)、embeddings/ (向量庫)、src/ (程式碼) 等。111111111新增初始爬蟲腳本新增 src/crawler.py 腳本，原定目標是自動爬取國泰產險機車保險知識文章，並示範使用 requests + BeautifulSoup。222222222新增文章預處理新增 src/preprocess.py 腳本，負責 HTML 清洗、Token 計數 (tiktoken) 與文章分塊 (Chunking)，建議大小為 300-500 Tokens。3333新增向量資料庫建置新增 src/build_vector_db.py，支援 OpenAI/HuggingFace Embedding 模型，以及 Chroma/FAISS 向量庫建置。4444新增RAG 引擎與系統提示新增 src/rag_engine.py，包含完整的 RAG 流程、Retriever (Top-K) 及嚴格的 System Prompt 規則。5555555555555555新增Streamlit 互動介面新增 src/app.py，使用 Streamlit 建立互動式 UI，方便測試 RAG 系統。6666變更專案路徑調整根據使用者專案路徑，將專案結構從 rag_insurance/ 變更為 HW4/。7777修正爬蟲失敗與解決方案錯誤: 初始爬蟲因網站使用 JavaScript 動態載入文章而失敗（抓到 0 篇文章）。修正: 採用 手動建立示範文章 (30 篇 .txt 檔案於 data/raw_html/)，並移除爬蟲步驟，以確保知識來源穩定性。888888888修正langchain 版本兼容問題錯誤: ModuleNotFoundError: No module named 'langchain.text_splitter'。問題源於 LangChain 1.x 版本移除了舊版模組路徑。修正: 嘗試降版至 LangChain 0.0.153 或使用 RecursiveCharacterTextSplitter 失敗後，最終決定 移除所有 LangChain 依賴，改用純 Python + HuggingFace + FAISS。9999999999999999變更本地 LLM 選型專案從 OpenAI API 轉為 本地 LLM，以實現全本地化 RAG。初始使用 uer/gpt2-chinese-cluecorpussmall，後續因模型生成品質不佳及亂碼問題，改用 ChatGLM-6B (或 -int4)。10101010101010101010101010101010修正路徑與套件衝突錯誤: DATA_DIR = "../data/raw_html/" 找不到路徑；AttributeError: ChatGLMTokenizer has no attribute vocab_size；ERROR: Failed building wheel for tokenizers。修正: 採用 os.path.abspath(_file_) 確保路徑絕對定位；改用 ChatGLM 官方 chat_model.chat() API，避免使用 AutoTokenizer 或 pipeline；調整 requirements.txt 版本並加入 sentencepiece。11111111111111111111111111111111修正最終模型選型與部署準備錯誤: ChatGLM 6B 模型難以在 Streamlit 雲端部署且有 Gated Repo (401) 授權問題。修正: 替換為 公開、輕量化、非 Gated 的 3B 模型 (如 TheBloke/guanaco-3B-GPTQ 或 NousResearch/Nous-Hermes-3B-GPTQ)，確保線上部署可行。121212121212121212新增部署準備新增 requirements.txt 檔案，鎖定專案所有依賴套件，並使用 faiss-cpu 以符合 Streamlit Cloud 環境。你的日誌變更API 金鑰讀取根據使用者要求，src/rag_engine.py 的金鑰讀取方式從 st.secrets 改回依賴本地的 .env 檔案 (用於本地開發)。你的日誌新增專案文件新增了完整的 README.md 專案說明文件，詳細介紹了專案功能、技術棧、如何在本地端執行以及專案結構。你的日誌新增Git 上傳指令提供了將專案上傳到 GitHub 的完整 git 指令教學。你的日誌修正Git rejected 錯誤解決 git push 時發生的 rejected 錯誤，透過 git pull origin main 合併遠端變更後再推送。你的日誌修正Git unrelated histories 錯誤解決 git pull 時發生的 fatal: refusing to merge unrelated histories 錯誤，使用 git pull origin main --allow-unrelated-histories 強制合併。你的日誌修正Git Merge Conflict解決合併後 README.md 的內容衝突，手動編輯並提交解決。你的日誌修正Git 大檔案上傳失敗解決 GH001: Large files detected 錯誤，更新 .gitignore 排除 /rag_env/ 和 /venv/，並執行 git rm -r --cached rag_env 移除追蹤。你的日誌修正OpenAI Quota Exceeded (2025-11-28)問題描述: 呼叫 gpt-3.5-turbo 報「超過額度」錯誤。解決方案: 將 src/rag_engine.py 中的模型更換為 gpt-4o-mini (高性價比模型)，以規避特定模型額度或用量限制。你的日誌
